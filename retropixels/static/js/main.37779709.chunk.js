(this["webpackJsonpretropixels-web"]=this["webpackJsonpretropixels-web"]||[]).push([[0],{220:function(e,t,a){},221:function(e,t,a){},249:function(e,t){},251:function(e,t){},501:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(29),r=a.n(i),o=(a(220),a(9)),s=a(531),j=(a(221),a(533)),l=a(534),b=a(504),d=a(530),u=a(202),h=a.n(u),O=a(532),m=a(64),x=a.n(m),f=a(528),g=a(96),p=a(203),v=a(535),C=a(537),S=a(536),w=a(1);function I(e){var t=c.a.useRef(null),a=e.width,i=e.height,r=e.imageData;return Object(n.useEffect)((function(){void 0!==r&&t.current.getContext("2d").putImageData(r,0,0)}),[r]),Object(w.jsx)(v.a,{m:1,children:Object(w.jsx)("canvas",{ref:t,width:a,height:i})})}I.defaultProps={imageData:void 0};var y=I;function k(e){var t=e.onload,a=e.imageData,c=Object(n.useState)(void 0),i=Object(o.a)(c,2),r=i[0],s=i[1],j=Object(p.a)({accept:"image/*",maxFiles:1}),l=j.acceptedFiles,b=j.fileRejections,d=j.getRootProps,u=j.getInputProps;return Object(n.useEffect)((function(){void 0!==l&&1===l.length&&function(e){var a=new FileReader;a.onabort=function(){return s("file reading was aborted")},a.onerror=function(){return s("file reading has failed")},a.onload=function(){x.a.read(a.result).then((function(a){s(void 0),t({jimpImage:a,filename:e.name})})).catch((function(e){s(e.message)}))},a.readAsArrayBuffer(e)}(l[0])}),[l]),Object(n.useEffect)((function(){void 0!==b&&b.length>0&&s("Cannot load' + ".concat(b[0].file))}),[b]),Object(w.jsxs)(f.a,{children:[Object(w.jsx)(v.a,{border:1,m:1,boxShadow:2,borderRadius:"borderRadius",borderColor:"grey.500",children:Object(w.jsxs)("div",Object(g.a)(Object(g.a)({},d({className:"dropzone"})),{},{children:[Object(w.jsx)("input",Object(g.a)({},u())),Object(w.jsx)(y,{width:320,height:200,imageData:a}),Object(w.jsx)("p",{children:"Drop image here, or click to select image"})]}))}),Object(w.jsx)(C.a,{open:r,autoHideDuration:6e3,onClose:function(){return s(void 0)},children:Object(w.jsx)(S.a,{severity:"error",children:r})})]})}k.defaultProps={imageData:void 0};var E=k,D=a(20);function R(e){if(void 0!==e){var t,a=e.bitmap.width*e.bitmap.height*4;return t=e.bitmap.data.length>a?e.bitmap.data.slice(0,a):e.bitmap.data,void 0!==e?new ImageData(Uint8ClampedArray.from(t),e.bitmap.width,e.bitmap.height):void 0}}function P(e){var t=e.lastIndexOf("."),a=e.substring(t+1,e.length);return{basename:e.substring(0,Math.min(30,t)),extension:a}}function B(e,t){if(e.length<=t)return e;var a=P(e);return"".concat(a.basename.substring(0,t),"...").concat(a.extension)}var z=a(539),F=a(543),A=a(529),W=a(541),L=a(542);function H(e){var t=e.label,a=e.value,n=e.items,c=e.onChange;return Object(w.jsxs)(W.a,{component:"fieldset",children:[Object(w.jsx)(L.a,{component:"legend",children:t}),Object(w.jsx)(F.a,{row:!0,"aria-label":t,name:"select".concat(t),value:a,onChange:function(e){return c(e.target.value)},children:n.map((function(e){return Object(w.jsx)(A.a,{value:e,control:Object(w.jsx)(z.a,{}),label:e})}))})]})}H.defaultProps={label:"Choose"};var M=H;var N=function(e){var t=e.onChanged,a=Object(n.useState)(void 0),c=Object(o.a)(a,2),i=c[0],r=c[1],s=Object(n.useState)(void 0),j=Object(o.a)(s,2),l=j[0],b=j[1],d=Object(n.useState)(void 0),u=Object(o.a)(d,2),h=u[0],O=u[1],x=Object(n.useState)("fill"),g=Object(o.a)(x,2),p=g[0],v=g[1],C=Object(n.useState)("input"),S=Object(o.a)(C,2),I=S[0],y=S[1];return Object(n.useEffect)((function(){if(void 0!==i){var e=i.clone();"fill"===p?e.cover(320,200,m.RESIZE_HERMITE):"fit"===p?e.contain(320,200,m.RESIZE_HERMITE):function(e){var t;(e.bitmap.width<320||e.bitmap.height<200)&&(t=e.clone()),e.crop(0,0,320,200),void 0!==t&&(function(e){e.scan(0,0,e.bitmap.width,e.bitmap.height,(function(t,a,n){e.bitmap.data[n+0]=0,e.bitmap.data[n+1]=0,e.bitmap.data[n+2]=0,e.bitmap.data[n+3]=0}))}(e),e.blit(t,0,0))}(e),b(e)}}),[i,p]),Object(n.useEffect)((function(){t({jimpImage:l,filename:I}),O(R(l))}),[l,t,I]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h4",{children:B(I,30)}),Object(w.jsx)(f.a,{children:Object(w.jsx)(E,{imageData:h,onload:function(e){r(e.jimpImage),y(e.filename)}})}),Object(w.jsx)(f.a,{align:"left",children:Object(w.jsx)(M,{label:"cropping",items:["crop","fill","fit"],value:p,onChange:function(e){v(e)}})})]})},G=a(540),T=a(544),J=a(195),Q=a.n(J),Z=a(196),_=a.n(Z),q=a(198),K=a.n(q),U=a(197),V=a.n(U),X=a(91),Y=a.n(X);function $(e){var t=e.jimpImage,a=e.onChanged,c=!0,i=!1,r=!1,j=!1,l=!1,u=Object(n.useState)(void 0),h=Object(o.a)(u,2),O=h[0],m=h[1],x=Object(n.useState)(void 0),g=Object(o.a)(x,2),p=g[0],v=g[1],C=Object(n.useState)(c),S=Object(o.a)(C,2),I=S[0],k=S[1],E=Object(n.useState)(i),D=Object(o.a)(E,2),P=D[0],B=D[1],z=Object(n.useState)(r),F=Object(o.a)(z,2),W=F[0],L=F[1],H=Object(n.useState)(j),M=Object(o.a)(H,2),N=M[0],J=M[1],Z=Object(n.useState)(l),q=Object(o.a)(Z,2),U=q[0],X=q[1],$=Object(n.useState)(0),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(0),ce=Object(o.a)(ne,2),ie=ce[0],re=ce[1],oe=Object(n.useState)(0),se=Object(o.a)(oe,2),je=se[0],le=se[1],be=Object(n.useState)(0),de=Object(o.a)(be,2),ue=de[0],he=de[1];Object(n.useEffect)((function(){a(O),v(R(O))}),[O,a]),Object(n.useEffect)((function(){if(void 0!==t){var e=t.clone();P&&e.greyscale(),I&&e.normalize(),e.brightness(te),e.contrast(ie),je>0&&e.blur(je),e.mirror(W,N),U&&e.invert(),ue>0&&e.threshold({max:ue,autoGreyscale:!1}),m(e)}}),[t,I,te,ie,P,je,W,N,U,ue]);var Oe=I===c&&P===i&&W===r&&N===j&&U===l&&0===ie&&0===te&&0===je&&0===ue;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h4",{children:"pre-processing"}),Object(w.jsx)(f.a,{children:Object(w.jsx)(y,{width:320,height:200,imageData:p})}),Object(w.jsx)(f.a,{children:Object(w.jsxs)(d.a,{variant:"contained",disabled:Oe,onClick:function(){return k(c),B(i),L(r),J(j),X(l),ae(0),re(0),le(0),void he(0)},children:[Object(w.jsx)(Y.a,{})," \xa0 defaults"]})}),Object(w.jsxs)(f.a,{align:"left",children:[Object(w.jsx)(A.a,{control:Object(w.jsx)(G.a,{checked:I,onChange:function(){k(!I)},name:"normalizeCheckbox"}),label:"normalize"}),Object(w.jsx)(A.a,{control:Object(w.jsx)(G.a,{checked:P,onChange:function(){B(!P)},name:"greyscaleCheckbox"}),label:"greyscale"}),Object(w.jsx)(A.a,{control:Object(w.jsx)(G.a,{checked:U,onChange:function(){X(!U)},name:"invertCheckbox"}),label:"invert"})]}),Object(w.jsxs)(f.a,{align:"left",children:[Object(w.jsx)(A.a,{control:Object(w.jsx)(G.a,{checked:W,onChange:function(){L(!W)},name:"mirrorHorCheckbox"}),label:"flip horizontal"}),Object(w.jsx)(A.a,{control:Object(w.jsx)(G.a,{checked:N,onChange:function(){J(!N)},name:"mirrorVerCheckbox"}),label:"flip vertical"})]}),Object(w.jsx)(b.a,{gutterBottom:!0,align:"left",children:"brightness"}),Object(w.jsxs)(s.a,{container:!0,children:[Object(w.jsxs)(s.a,{item:!0,children:[Object(w.jsx)(Q.a,{})," \xa0"]}),Object(w.jsx)(s.a,{item:!0,xs:!0,children:Object(w.jsx)(T.a,{min:-1,max:1,step:.05,value:te,onChange:function(e,t){return ae(t)},valueLabelDisplay:"auto"})})]}),Object(w.jsx)(b.a,{gutterBottom:!0,align:"left",children:"contrast"}),Object(w.jsxs)(s.a,{container:!0,children:[Object(w.jsxs)(s.a,{item:!0,children:[Object(w.jsx)(_.a,{})," \xa0"]}),Object(w.jsx)(s.a,{item:!0,xs:!0,children:Object(w.jsx)(T.a,{min:-1,max:1,step:.05,value:ie,onChange:function(e,t){return re(t)},valueLabelDisplay:"auto"})})]}),Object(w.jsx)(b.a,{gutterBottom:!0,align:"left",children:"blur"}),Object(w.jsxs)(s.a,{container:!0,children:[Object(w.jsxs)(s.a,{item:!0,children:[Object(w.jsx)(V.a,{})," \xa0"]}),Object(w.jsx)(s.a,{item:!0,xs:!0,children:Object(w.jsx)(T.a,{min:0,max:10,value:je,onChange:function(e,t){return le(t)},valueLabelDisplay:"auto"})})]}),Object(w.jsx)(b.a,{gutterBottom:!0,align:"left",children:"threshold"}),Object(w.jsxs)(s.a,{container:!0,children:[Object(w.jsxs)(s.a,{item:!0,children:[Object(w.jsx)(K.a,{})," \xa0"]}),Object(w.jsx)(s.a,{item:!0,xs:!0,children:Object(w.jsx)(T.a,{min:0,max:255,value:ue,onChange:function(e,t){return he(t)}})})]})]})}$.defaultProps={jimpImage:void 0};var ee=$,te=a(201),ae=a.n(te),ne=a(200),ce=a.n(ne),ie=a(199),re=a(56),oe=a.n(re);function se(e){var t=D.GraphicModes.all.bitmap,a=e.jimpImage,c=e.onChanged,i=e.hires,r=e.colorspaceId,s=e.paletteId,j=e.ditherId,l=e.ditherRadius,b=new D.Quantizer(D.Palettes.all[s],D.ColorSpaces.all[r]),d=new D.Converter(b),u=new oe.a(oe.a.presets[j],l),h=Object(n.useState)(void 0),O=Object(o.a)(h,2),m=O[0],x=O[1],f=Object(n.useState)(void 0),g=Object(o.a)(f,2),p=g[0],v=g[1],C=Object(n.useState)(b),S=Object(o.a)(C,2),I=S[0],k=S[1],E=Object(n.useState)(d),R=Object(o.a)(E,2),P=R[0],B=R[1],z=Object(n.useState)(u),F=Object(o.a)(z,2),A=F[0],W=F[1];return Object(n.useEffect)((function(){k(new D.Quantizer(D.Palettes.all[s],D.ColorSpaces.all[r]))}),[r,s]),Object(n.useEffect)((function(){B(new D.Converter(I))}),[I]),Object(n.useEffect)((function(){W(new oe.a(oe.a.presets[j],l))}),[j,l]),Object(n.useEffect)((function(){if(void 0!==a){var e=t({hires:i}),n=a.clone();n.resize(e.mode.width,e.mode.height),"none"!==j&&A.dither(n.bitmap),n.opaque(),P.convert(n.bitmap,e),x(e)}}),[a,P,A,i,t]),Object(n.useEffect)((function(){v(function(e){if(void 0===e)return new ImageData(1,1);for(var t=e.mode.width*e.mode.pixelWidth,a=new ImageData(t,e.mode.height),n=0;n<e.mode.height;n++)for(var c=0;c<e.mode.width;c++)for(var i=e.peek(c,n),r=void 0!==i?D.Palettes.all.colodore.get(i):[0,0,0,0],o=0;o<e.mode.pixelWidth;o++){var s=4*n*t+c*e.mode.pixelWidth*4+4*o;a.data[s]=r[0],a.data[s+1]=r[1],a.data[s+2]=r[2],a.data[s+3]=255}return a}(m)),c(m)}),[m,c]),Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(y,{width:320,height:200,imageData:p})})}se.defaultProps={jimpImage:void 0,onChanged:function(){},hires:!1,colorspaceId:"xyz",paletteId:"colodore",ditherId:"bayer4x4",ditherRadius:32};var je=se;function le(e){var t="bayer4x4",a="colodore",c="xyz",i=!1,r=e.jimpImage,j=e.filename,l=Object(n.useState)(void 0),u=Object(o.a)(l,2),h=u[0],O=u[1],m=Object(n.useState)(c),x=Object(o.a)(m,2),g=x[0],p=x[1],v=Object(n.useState)(a),C=Object(o.a)(v,2),S=C[0],I=C[1],y=Object(n.useState)(i),k=Object(o.a)(y,2),E=k[0],R=k[1],B=Object(n.useState)(t),z=Object(o.a)(B,2),F=z[0],W=z[1],L=Object(n.useState)(32),H=Object(o.a)(L,2),N=H[0],J=H[1],Q="output";if(void 0!==h){var Z=1===h.mode.pixelWidth?".art":".kla",_=P(j);Q="".concat(_.basename.substring(0,30)).concat(Z)}var q="output";void 0!==h&&(q=1===h.mode.pixelWidth?"Art studio":"Koala painter");var K=g===c&&S===a&&E===i&&F===t&&32===N;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("h4",{children:[q," file"]}),Object(w.jsx)(f.a,{children:Object(w.jsx)(je,{jimpImage:r,onChanged:function(e){O(e)},hires:E,colorspaceId:g,paletteId:S,ditherId:F,ditherRadius:N})}),Object(w.jsx)(f.a,{children:Object(w.jsxs)(s.a,{container:!0,children:[Object(w.jsx)(s.a,{item:!0,xs:!0,children:Object(w.jsxs)(d.a,{variant:"contained",disabled:K,onClick:function(){return p(c),I(a),R(i),W(t),void J(32)},children:[Object(w.jsx)(Y.a,{})," \xa0 defaults"]})}),Object(w.jsx)(s.a,{item:!0,xs:!0,children:Object(w.jsxs)(d.a,{variant:"contained",disabled:void 0===h,color:"primary",onClick:function(){return function(){var e=D.C64Writer.toBinary(h),t=D.C64Writer.toBuffer(e),a=new Blob([t],{type:"application/octet-stream"});Object(ie.saveAs)(a,Q)}()},children:[Object(w.jsx)(ce.a,{})," \xa0 Download"]})})]})}),Object(w.jsx)(f.a,{align:"left",children:Object(w.jsx)(A.a,{control:Object(w.jsx)(G.a,{checked:E,onChange:function(){R(!E)},name:"mirrorHorCheckbox"}),label:"hires"})}),Object(w.jsxs)(f.a,{align:"left",children:[Object(w.jsx)(M,{label:"colorspace",value:g,items:["rgb","yuv","xyz","rainbow"],onChange:function(e){return p(e)}}),Object(w.jsx)(M,{label:"palette",value:S,items:["colodore","pepto","deekay"],onChange:function(e){return I(e)}}),Object(w.jsx)(M,{label:"dithering",value:F,items:["none","bayer2x2","bayer4x4","bayer8x8"],onChange:function(e){return W(e)}}),Object(w.jsx)(b.a,{gutterBottom:!0,align:"left",children:"dithering strength"}),Object(w.jsxs)(s.a,{container:!0,children:[Object(w.jsxs)(s.a,{item:!0,children:[Object(w.jsx)(ae.a,{})," \xa0"]}),Object(w.jsx)(s.a,{item:!0,xs:!0,children:Object(w.jsx)(T.a,{disabled:"none"===F,min:0,max:64,value:N,onChange:function(e,t){return J(t)},valueLabelDisplay:"auto"})})]})]})]})}le.defaultProps={jimpImage:void 0,filename:"output"};var be=le,de=Object(O.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var ue=function(){var e=Object(n.useState)(void 0),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(void 0),r=Object(o.a)(i,2),u=r[0],O=r[1],m=Object(n.useState)(void 0),x=Object(o.a)(m,2),f=x[0],g=x[1],p=de();return Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)("body",{className:"App-body",children:[Object(w.jsx)("div",{className:p.root,children:Object(w.jsx)(j.a,{position:"static",children:Object(w.jsxs)(l.a,{variant:"dense",children:[Object(w.jsx)(b.a,{variant:"h6",className:p.title,children:"Retropixels"}),Object(w.jsx)(d.a,{color:"inherit",href:"https://github.com/micheldebree/retropixels",children:Object(w.jsx)(h.a,{})})]})})}),Object(w.jsxs)(s.a,{container:!0,spacing:3,children:[Object(w.jsx)(s.a,{item:!0,xs:!0,children:Object(w.jsx)(N,{onChanged:function(e){c(e.jimpImage),g(e.filename)}})}),Object(w.jsx)(s.a,{item:!0,xs:!0,children:Object(w.jsx)(ee,{jimpImage:a,onChanged:function(e){return O(e)}})}),Object(w.jsx)(s.a,{item:!0,xs:!0,children:Object(w.jsx)(be,{jimpImage:u,filename:f})})]})]})})},he=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,545)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};r.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(ue,{})}),document.getElementById("root")),he()}},[[501,1,2]]]);
//# sourceMappingURL=main.37779709.chunk.js.map