(this["webpackJsonpretropixels-web"]=this["webpackJsonpretropixels-web"]||[]).push([[0],{221:function(e,t,a){},222:function(e,t,a){},250:function(e,t){},252:function(e,t){},502:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(29),r=a.n(i),o=(a(221),a(9)),s=a(530),l=a(531),j=a(205),b=a(532),d=a(527),u=a(528),h=(a(222),a(202)),O=a.n(h),f=a(529),m=a(63),x=a.n(m),g=a(525),p=a(526),v=a(538),C=a(540),S=a(542),I=a(195),w=a.n(I),y=a(196),k=a.n(y),D=a(198),E=a.n(D),R=a(197),z=a.n(R),P=a(91),F=a.n(P),L=a(20);function B(e){if(void 0!==e){var t,a=e.bitmap.width*e.bitmap.height*4;return t=e.bitmap.data.length>a?e.bitmap.data.slice(0,a):e.bitmap.data,void 0!==e?new ImageData(Uint8ClampedArray.from(t),e.bitmap.width,e.bitmap.height):void 0}}function W(e){var t=e.lastIndexOf("."),a=e.substring(t+1,e.length);return{basename:e.substring(0,Math.min(30,t)),extension:a}}function A(e,t){if(e.length<=t)return e;var a=W(e);return"".concat(a.basename.substring(0,t),"...").concat(a.extension)}var N=a(96),H=a(203),M=a(533),G=a(535),T=a(534),J=a(1);function Q(e){var t=c.a.useRef(null),a=e.width,i=e.height,r=e.imageData;return Object(n.useEffect)((function(){void 0!==r&&t.current.getContext("2d").putImageData(r,0,0)}),[r]),Object(J.jsx)(M.a,{m:1,children:Object(J.jsx)("canvas",{ref:t,width:a,height:i})})}Q.defaultProps={imageData:void 0};var Z=Q;function _(e){var t=e.onload,a=e.imageData,c=Object(n.useState)(void 0),i=Object(o.a)(c,2),r=i[0],s=i[1],l=Object(H.a)({accept:"image/*",maxFiles:1}),j=l.acceptedFiles,b=l.fileRejections,d=l.getRootProps,u=l.getInputProps;return Object(n.useEffect)((function(){void 0!==j&&1===j.length&&function(e){var a=new FileReader;a.onabort=function(){return s("file reading was aborted")},a.onerror=function(){return s("file reading has failed")},a.onload=function(){x.a.read(a.result).then((function(a){s(void 0),t({jimpImage:a,filename:e.name})})).catch((function(e){s(e.message)}))},a.readAsArrayBuffer(e)}(j[0])}),[j]),Object(n.useEffect)((function(){if(void 0!==b&&b.length>0){var e=b[0],t=e.errors.map((function(e){return e.message})).reduce((function(e,t){return"".concat(e,",").concat(t)}));s("Cannot load ".concat(e.file.path,": ").concat(t))}}),[b]),Object(J.jsxs)(g.a,{children:[Object(J.jsx)(M.a,{border:1,m:1,boxShadow:2,borderRadius:"borderRadius",borderColor:"grey.500",children:Object(J.jsxs)("div",Object(N.a)(Object(N.a)({},d({className:"dropzone"})),{},{children:[Object(J.jsx)("input",Object(N.a)({},u())),Object(J.jsx)(Z,{width:320,height:200,imageData:a}),Object(J.jsx)("p",{children:"Drop image here, or click to select image"})]}))}),Object(J.jsx)(G.a,{open:r,autoHideDuration:6e3,onClose:function(){return s(void 0)},children:Object(J.jsx)(T.a,{severity:"error",children:r})})]})}_.defaultProps={imageData:void 0};var q=_,U=a(537),V=a(541),K=a(539);function X(e){var t=e.label,a=e.value,n=e.items,c=e.onChange;return Object(J.jsxs)(K.a,{component:"fieldset",children:[Object(J.jsx)(C.a,{component:"legend",children:t}),Object(J.jsx)(V.a,{row:!0,"aria-label":t,name:"select".concat(t),value:a,onChange:function(e){return c(e.target.value)},children:n.map((function(e){return Object(J.jsx)(p.a,{value:e,control:Object(J.jsx)(U.a,{}),label:e})}))})]})}X.defaultProps={label:"Choose"};var Y=X;var $=function(e){var t=e.onChanged,a=!0,c=!1,i=!1,r=!1,s=!1,l=Object(n.useState)(void 0),j=Object(o.a)(l,2),b=j[0],h=j[1],O=Object(n.useState)(void 0),f=Object(o.a)(O,2),x=f[0],I=f[1],y=Object(n.useState)(void 0),D=Object(o.a)(y,2),R=D[0],P=D[1],L=Object(n.useState)("input"),W=Object(o.a)(L,2),N=W[0],H=W[1],M=Object(n.useState)(void 0),G=Object(o.a)(M,2),T=G[0],Q=G[1],Z=Object(n.useState)("fill"),_=Object(o.a)(Z,2),U=_[0],V=_[1],K=Object(n.useState)(a),X=Object(o.a)(K,2),$=X[0],ee=X[1],te=Object(n.useState)(c),ae=Object(o.a)(te,2),ne=ae[0],ce=ae[1],ie=Object(n.useState)(i),re=Object(o.a)(ie,2),oe=re[0],se=re[1],le=Object(n.useState)(r),je=Object(o.a)(le,2),be=je[0],de=je[1],ue=Object(n.useState)(s),he=Object(o.a)(ue,2),Oe=he[0],fe=he[1],me=Object(n.useState)(0),xe=Object(o.a)(me,2),ge=xe[0],pe=xe[1],ve=Object(n.useState)(0),Ce=Object(o.a)(ve,2),Se=Ce[0],Ie=Ce[1],we=Object(n.useState)(0),ye=Object(o.a)(we,2),ke=ye[0],De=ye[1],Ee=Object(n.useState)(0),Re=Object(o.a)(Ee,2),ze=Re[0],Pe=Re[1];Object(n.useEffect)((function(){void 0!==R&&(t({jimpImage:R,filename:N}),Q(B(R)))}),[R,t,N]),Object(n.useEffect)((function(){if(void 0!==b){var e=b.clone();"fill"===U?e.cover(320,200,m.RESIZE_HERMITE):"fit"===U?e.contain(320,200,m.RESIZE_HERMITE):function(e){var t;(e.bitmap.width<320||e.bitmap.height<200)&&(t=e.clone()),e.crop(0,0,320,200),void 0!==t&&(this.clearJimpImage(e),e.blit(t,0,0))}(e),I(e)}}),[b,U]),Object(n.useEffect)((function(){if(void 0!==x){var e=x.clone();ne&&e.greyscale(),$&&e.normalize(),e.brightness(ge),e.contrast(Se),ke>0&&e.blur(ke),e.mirror(oe,be),Oe&&e.invert(),ze>0&&e.threshold({max:ze,autoGreyscale:!1}),P(e)}}),[x,$,ge,Se,ne,ke,oe,be,Oe,ze]);var Fe=$===a&&ne===c&&oe===i&&be===r&&Oe===s&&0===Se&&0===ge&&0===ke&&0===ze;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("h4",{children:A(N,30)}),Object(J.jsx)(g.a,{children:Object(J.jsx)(q,{imageData:T,onload:function(e){h(e.jimpImage),H(e.filename)}})}),Object(J.jsx)(g.a,{align:"left",children:Object(J.jsx)(Y,{label:"cropping",items:["crop","fill","fit"],value:U,onChange:function(e){V(e)}})}),Object(J.jsx)(g.a,{align:"left",children:Object(J.jsx)(d.a,{size:"small",disabled:Fe,startIcon:Object(J.jsx)(F.a,{}),onClick:function(){return ee(a),ce(c),se(i),de(r),fe(s),pe(0),Ie(0),De(0),void Pe(0)},children:"defaults"})}),Object(J.jsxs)(g.a,{align:"left",children:[Object(J.jsx)(p.a,{control:Object(J.jsx)(v.a,{checked:$,onChange:function(){ee(!$)},name:"normalizeCheckbox"}),label:"normalize"}),Object(J.jsx)(p.a,{control:Object(J.jsx)(v.a,{checked:ne,onChange:function(){ce(!ne)},name:"greyscaleCheckbox"}),label:"greyscale"}),Object(J.jsx)(p.a,{control:Object(J.jsx)(v.a,{checked:Oe,onChange:function(){fe(!Oe)},name:"invertCheckbox"}),label:"invert"}),Object(J.jsx)(p.a,{control:Object(J.jsx)(v.a,{checked:oe,onChange:function(){se(!oe)},name:"mirrorHorCheckbox"}),label:"flip horizontal"}),Object(J.jsx)(p.a,{control:Object(J.jsx)(v.a,{checked:be,onChange:function(){de(!be)},name:"mirrorVerCheckbox"}),label:"flip vertical"}),Object(J.jsx)(C.a,{component:"legend",children:"brightness"}),Object(J.jsxs)(u.a,{container:!0,children:[Object(J.jsxs)(u.a,{item:!0,children:[Object(J.jsx)(w.a,{})," \xa0"]}),Object(J.jsx)(u.a,{item:!0,xs:!0,children:Object(J.jsx)(S.a,{min:-1,max:1,step:.05,value:ge,onChange:function(e,t){return pe(t)},valueLabelDisplay:"auto"})})]}),Object(J.jsx)(C.a,{component:"legend",children:"contrast"}),Object(J.jsxs)(u.a,{container:!0,children:[Object(J.jsxs)(u.a,{item:!0,children:[Object(J.jsx)(k.a,{})," \xa0"]}),Object(J.jsx)(u.a,{item:!0,xs:!0,children:Object(J.jsx)(S.a,{min:-1,max:1,step:.05,value:Se,onChange:function(e,t){return Ie(t)},valueLabelDisplay:"auto"})})]}),Object(J.jsx)(C.a,{component:"legend",children:"blur"}),Object(J.jsxs)(u.a,{container:!0,children:[Object(J.jsxs)(u.a,{item:!0,children:[Object(J.jsx)(z.a,{})," \xa0"]}),Object(J.jsx)(u.a,{item:!0,xs:!0,children:Object(J.jsx)(S.a,{min:0,max:10,value:ke,onChange:function(e,t){return De(t)},valueLabelDisplay:"auto"})})]}),Object(J.jsx)(C.a,{component:"legend",children:"threshold"}),Object(J.jsxs)(u.a,{container:!0,children:[Object(J.jsxs)(u.a,{item:!0,children:[Object(J.jsx)(E.a,{})," \xa0"]}),Object(J.jsx)(u.a,{item:!0,xs:!0,children:Object(J.jsx)(S.a,{min:0,max:255,value:ze,onChange:function(e,t){return Pe(t)},valueLabelDisplay:"auto"})})]})]})]})},ee=a(201),te=a.n(ee),ae=a(200),ne=a.n(ae),ce=a(199),ie=a(55),re=a.n(ie);function oe(e){var t=L.GraphicModes.all.bitmap,a=e.jimpImage,c=e.onChanged,i=e.hires,r=e.colorspaceId,s=e.paletteId,l=e.ditherId,j=e.ditherRadius,b=new L.Quantizer(L.Palettes.all[s],L.ColorSpaces.all[r]),d=new L.Converter(b),u=new re.a(re.a.presets[l],j),h=Object(n.useState)(void 0),O=Object(o.a)(h,2),f=O[0],m=O[1],x=Object(n.useState)(void 0),g=Object(o.a)(x,2),p=g[0],v=g[1],C=Object(n.useState)(b),S=Object(o.a)(C,2),I=S[0],w=S[1],y=Object(n.useState)(d),k=Object(o.a)(y,2),D=k[0],E=k[1],R=Object(n.useState)(u),z=Object(o.a)(R,2),P=z[0],F=z[1];return Object(n.useEffect)((function(){w(new L.Quantizer(L.Palettes.all[s],L.ColorSpaces.all[r]))}),[r,s]),Object(n.useEffect)((function(){E(new L.Converter(I))}),[I]),Object(n.useEffect)((function(){F(new re.a(re.a.presets[l],j))}),[l,j]),Object(n.useEffect)((function(){if(void 0!==a){var e=t({hires:i}),n=a.clone();n.resize(e.mode.width,e.mode.height),"none"!==l&&P.dither(n.bitmap),n.opaque(),D.convert(n.bitmap,e),m(e)}}),[a,D,P,i,t]),Object(n.useEffect)((function(){v(function(e){if(void 0===e)return new ImageData(1,1);for(var t=e.mode.width*e.mode.pixelWidth,a=new ImageData(t,e.mode.height),n=0;n<e.mode.height;n++)for(var c=0;c<e.mode.width;c++)for(var i=e.peek(c,n),r=void 0!==i?L.Palettes.all.colodore.get(i):[0,0,0,0],o=0;o<e.mode.pixelWidth;o++){var s=4*n*t+c*e.mode.pixelWidth*4+4*o;a.data[s]=r[0],a.data[s+1]=r[1],a.data[s+2]=r[2],a.data[s+3]=255}return a}(f)),c(f)}),[f,c]),Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(Z,{width:320,height:200,imageData:p})})}oe.defaultProps={jimpImage:void 0,onChanged:function(){},hires:!1,colorspaceId:"xyz",paletteId:"colodore",ditherId:"bayer4x4",ditherRadius:32};var se=oe;function le(e){var t="bayer4x4",a="colodore",c="xyz",i=!1,r=e.jimpImage,s=e.filename,l=Object(n.useState)(void 0),j=Object(o.a)(l,2),b=j[0],h=j[1],O=Object(n.useState)(c),f=Object(o.a)(O,2),m=f[0],x=f[1],I=Object(n.useState)(a),w=Object(o.a)(I,2),y=w[0],k=w[1],D=Object(n.useState)(i),E=Object(o.a)(D,2),R=E[0],z=E[1],P=Object(n.useState)(t),B=Object(o.a)(P,2),A=B[0],N=B[1],H=Object(n.useState)(32),M=Object(o.a)(H,2),G=M[0],T=M[1],Q="output";if(void 0!==b){var Z=1===b.mode.pixelWidth?".art":".kla",_=W(s);Q="".concat(_.basename.substring(0,30)).concat(Z)}var q="output";void 0!==b&&(q=1===b.mode.pixelWidth?"art studio file":"koala painter file");var U=m===c&&y===a&&R===i&&A===t&&32===G;return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("h4",{children:q}),Object(J.jsx)(g.a,{children:Object(J.jsx)(se,{jimpImage:r,onChanged:function(e){h(e)},hires:R,colorspaceId:m,paletteId:y,ditherId:A,ditherRadius:G})}),Object(J.jsx)(g.a,{children:Object(J.jsx)(d.a,{variant:"contained",disabled:void 0===b,color:"primary",startIcon:Object(J.jsx)(ne.a,{}),onClick:function(){return function(){var e=L.C64Writer.toBinary(b),t=L.C64Writer.toBuffer(e),a=new Blob([t],{type:"application/octet-stream"});Object(ce.saveAs)(a,Q)}()},children:"Download"})}),Object(J.jsx)(g.a,{align:"left",children:Object(J.jsx)(d.a,{size:"small",disabled:U,startIcon:Object(J.jsx)(F.a,{}),onClick:function(){return x(c),k(a),z(i),N(t),void T(32)},children:"defaults"})}),Object(J.jsx)(g.a,{align:"left",children:Object(J.jsx)(p.a,{control:Object(J.jsx)(v.a,{checked:R,onChange:function(){z(!R)},name:"mirrorHorCheckbox"}),label:"hires"})}),Object(J.jsxs)(g.a,{align:"left",children:[Object(J.jsx)(Y,{label:"colorspace",value:m,items:["rgb","yuv","xyz","rainbow"],onChange:function(e){return x(e)}}),Object(J.jsx)(Y,{label:"palette",value:y,items:["colodore","pepto","deekay"],onChange:function(e){return k(e)}}),Object(J.jsx)(Y,{label:"dithering",value:A,items:["none","bayer2x2","bayer4x4","bayer8x8"],onChange:function(e){return N(e)}}),Object(J.jsx)(C.a,{component:"legend",children:"dithering strength"}),Object(J.jsxs)(u.a,{container:!0,children:[Object(J.jsxs)(u.a,{item:!0,children:[Object(J.jsx)(te.a,{})," \xa0"]}),Object(J.jsx)(u.a,{item:!0,xs:!0,children:Object(J.jsx)(S.a,{disabled:"none"===A,min:0,max:64,value:G,onChange:function(e,t){return T(t)},valueLabelDisplay:"auto"})})]})]})]})}le.defaultProps={jimpImage:void 0,filename:"output"};var je=le,be=a.p+"static/media/logo.42e2fcaf.svg",de="2021-05-29.ffdcbc1",ue="https://github.com/micheldebree/retropixels/commit/ffdcbc160c694b8a865e7ee8fc11ddc150c83c39",he=Object(f.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var Oe=function(){var e=Object(n.useState)(void 0),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(void 0),r=Object(o.a)(i,2),h=r[0],f=r[1],m=he();return Object(J.jsx)("div",{className:"App",children:Object(J.jsxs)("body",{className:"App-body",children:[Object(J.jsx)("div",{className:m.root,children:Object(J.jsx)(s.a,{position:"static",children:Object(J.jsxs)(l.a,{variant:"dense",children:[Object(J.jsx)("img",{src:be,alt:"Logo",className:"logo"}),Object(J.jsx)(j.a,{variant:"h6",className:m.title,align:"left",children:"Retropixels"}),Object(J.jsxs)(b.a,{href:ue,color:"inherit",variant:"body2",children:["v",de]}),Object(J.jsx)(d.a,{color:"inherit",href:"https://github.com/micheldebree/retropixels",children:Object(J.jsx)(O.a,{})})]})})}),Object(J.jsxs)(u.a,{container:!0,spacing:3,children:[Object(J.jsx)(u.a,{item:!0,xs:!0,children:Object(J.jsx)($,{onChanged:function(e){c(e.jimpImage),f(e.filename)}})}),Object(J.jsx)(u.a,{item:!0,xs:!0,children:Object(J.jsx)(je,{jimpImage:a,filename:h})})]})]})})},fe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,543)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};r.a.render(Object(J.jsx)(c.a.StrictMode,{children:Object(J.jsx)(Oe,{})}),document.getElementById("root")),fe()}},[[502,1,2]]]);
//# sourceMappingURL=main.b672aa1c.chunk.js.map