{"version":3,"sources":["Utilities.js","Canvas.jsx","ImageUpload.jsx","ProfileSelection.jsx","MyCheckbox.jsx","MySlider.jsx","ResetButton.jsx","ImagePreProcessor.jsx","TargetImage.jsx","Retropixels.jsx","logo.svg","version.js","App.jsx","reportWebVitals.js","index.jsx"],"names":["getImageDataFromJimpImage","jimpImage","undefined","data","dataSize","bitmap","width","height","length","slice","ImageData","Uint8ClampedArray","from","parseFilename","filename","periodPos","lastIndexOf","extension","substring","basename","Math","min","abbreviateFilename","maxSize","parsed","Canvas","props","canvasRef","React","useRef","imageData","useEffect","current","getContext","putImageData","Box","m","ref","defaultProps","ImageUpload","onload","useState","error","setError","useDropzone","accept","maxFiles","acceptedFiles","fileRejections","getRootProps","getInputProps","file","reader","FileReader","onabort","onerror","Jimp","read","result","then","img","name","catch","err","message","readAsArrayBuffer","readFile","rejectedFile","errorMessages","errors","map","e","reduce","a","path","Container","border","boxShadow","borderRadius","borderColor","className","Typography","color","gutterBottom","Snackbar","open","autoHideDuration","onClose","Alert","severity","ProfileSelection","label","value","items","onChange","tooltip","Tooltip","title","FormControl","component","FormLabel","RadioGroup","row","aria-label","event","target","i","FormControlLabel","control","Radio","MyCheckbox","arrow","Checkbox","checked","MySlider","max","step","icon","disabled","Grid","container","item","xs","Slider","newValue","valueLabelDisplay","ResetButton","onClick","align","Button","size","startIcon","ImagePreProcessor","onChanged","normalizeDefault","greyscaleDefault","mirrorHorDefault","mirrorVerDefault","invertDefault","sourceImage","setSourceImage","croppedImage","setCroppedImage","image","setImage","setImageData","setFilename","scale","setScale","normalize","setNormalize","greyscale","setGreyscale","mirrorHor","setMirrorHor","mirrorVer","setMirrorVer","invert","setInvert","brightness","setBrightness","contrast","setContrast","blur","setBlur","threshold","setThreshold","newImage","clone","cover","contain","blitImage","crop","this","clearJimpImage","blit","cropJimpImage","mirror","autoGreyscale","defaultsSet","newUploadedImage","v","TargetImage","graphicMode","GraphicModes","all","hires","nomaps","colorspaceId","paletteId","ditherId","ditherRadius","defaultQuantizer","Quantizer","Palettes","ColorSpaces","defaultConverter","Converter","defaultDitherer","OrderedDither","presets","pixelImage","setPixelImage","quantizer","setQuantizer","converter","setConverter","ditherer","setDitherer","newPixelImage","resizedImage","resize","mode","dither","opaque","convert","imageWidth","pixelWidth","y","x","paletteIndex","peek","pixelValue","colodore","get","xx","index","getImageDataFromPixelImage","Retropixels","ditherDefault","paletteDefault","colorspaceDefault","hiresDefault","nomapsDefault","colorspace","setColorSpace","palette","setPalette","setHires","setNomaps","setDither","setDitherRadius","targetFilename","parsedFilename","outputFormat","variant","binary","C64Writer","toBinary","buffer","toBuffer","blob","Blob","type","saveAs","saveOutput","useStyles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","App","classes","AppBar","position","Toolbar","src","Logo","alt","Link","href","AppVersion","newSourceImage","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bdb68249.chunk.js","sourcesContent":["import { ColorSpaces, Quantizer, Converter, GraphicModes, Palettes } from 'retropixels-core';\n\nexport function convertJimpImageToPixelImage(jimpImage) {\n  if (jimpImage === undefined) {\n    return undefined;\n  }\n  const palette = Palettes.all.colodore;\n  const colorspace = ColorSpaces.all.xyz;\n  const quantizer = new Quantizer(palette, colorspace);\n  const converter = new Converter(quantizer);\n\n  const graphicMode = GraphicModes.all.bitmap;\n  const result = graphicMode({});\n\n  converter.convert(jimpImage.bitmap, result);\n  return result;\n}\n\nexport function getImageDataFromJimpImage(jimpImage) {\n  if (jimpImage === undefined) {\n    return undefined;\n  }\n\n  // TODO: Jimp does not seem to shrink the data array when resizing picture to a smaller size... Confirm?\n  const dataSize = jimpImage.bitmap.width * jimpImage.bitmap.height * 4;\n  let data;\n  if (jimpImage.bitmap.data.length > dataSize) {\n    data = jimpImage.bitmap.data.slice(0, dataSize);\n  } else {\n    data = jimpImage.bitmap.data;\n  }\n\n  return jimpImage !== undefined\n    ? new ImageData(Uint8ClampedArray.from(data), jimpImage.bitmap.width, jimpImage.bitmap.height)\n    : undefined;\n}\n\nexport function cropJimpImage(jimpImage) {\n  const isTooSmall = jimpImage.bitmap.width < 320 || jimpImage.bitmap.height < 200;\n  let blitImage;\n\n  // if the image is too small, the cropped image is cleared,\n  // and then the smaller image is blitted onto it\n  // this is a workaround for artifacts when cropping images to larger sizes\n  if (isTooSmall) {\n    blitImage = jimpImage.clone();\n  }\n  jimpImage.crop(0, 0, 320, 200);\n  if (blitImage !== undefined) {\n    this.clearJimpImage(jimpImage);\n    jimpImage.blit(blitImage, 0, 0);\n  }\n}\n\nexport function clearJimpImage(jimpImage) {\n  jimpImage.scan(0, 0, jimpImage.bitmap.width, jimpImage.bitmap.height, (x, y, idx) => {\n    // this is the image\n\n    jimpImage.bitmap.data[idx + 0] = 0;\n    jimpImage.bitmap.data[idx + 1] = 0;\n    jimpImage.bitmap.data[idx + 2] = 0;\n    jimpImage.bitmap.data[idx + 3] = 0;\n  });\n}\n\nexport function getImageDataFromPixelImage(pixelImage) {\n  if (pixelImage === undefined) {\n    return new ImageData(1, 1);\n  }\n  const imageWidth = pixelImage.mode.width * pixelImage.mode.pixelWidth;\n  // const imageWidth = pixelImage.mode.width;\n  const imageData = new ImageData(imageWidth, pixelImage.mode.height);\n  for (let y = 0; y < pixelImage.mode.height; y++) {\n    for (let x = 0; x < pixelImage.mode.width; x++) {\n      const paletteIndex = pixelImage.peek(x, y);\n      const pixelValue = paletteIndex !== undefined ? Palettes.all.colodore.get(paletteIndex) : [0, 0, 0, 0];\n      for (let xx = 0; xx < pixelImage.mode.pixelWidth; xx++) {\n        const index = y * 4 * imageWidth + x * pixelImage.mode.pixelWidth * 4 + xx * 4;\n        imageData.data[index] = pixelValue[0];\n        imageData.data[index + 1] = pixelValue[1];\n        imageData.data[index + 2] = pixelValue[2];\n        imageData.data[index + 3] = 0xff;\n      }\n      // Pixels.poke(imageData.data, x, y, pixelValue);\n    }\n  }\n  return imageData;\n}\n\nexport function parseFilename(filename) {\n  const periodPos = filename.lastIndexOf('.');\n  const extension = filename.substring(periodPos + 1, filename.length);\n  const basename = filename.substring(0, Math.min(30, periodPos));\n  return { basename, extension };\n}\n\nexport function abbreviateFilename(filename, maxSize) {\n  if (filename.length <= maxSize) {\n    return filename;\n  }\n  const parsed = parseFilename(filename);\n\n  return `${parsed.basename.substring(0, maxSize)}...${parsed.extension}`;\n}\n\nexport default {\n  getImageDataFromJimpImage\n};\n","import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Box } from '@material-ui/core';\n\n// https://blog.koenvangilst.nl/react-hooks-with-canvas/\n// https://www.w3schools.com/Tags/canvas_putimagedata.asp\n\nfunction Canvas(props) {\n  const canvasRef = React.useRef(null);\n  const getContext = () => canvasRef.current.getContext('2d');\n\n  const { width, height, imageData } = props;\n\n  // if imagedata property is set/changes, draw it on the canvas\n  useEffect(() => {\n    if (imageData !== undefined) {\n      getContext().putImageData(imageData, 0, 0);\n    }\n  }, [imageData]);\n\n  return (\n    <Box m={1}>\n      <canvas ref={canvasRef} width={width} height={height} />\n    </Box>\n  );\n}\n\n// TODO: get width and height from imagedata\nCanvas.propTypes = {\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  imageData: PropTypes.shape()\n};\n\nCanvas.defaultProps = {\n  imageData: undefined\n};\n\nexport default Canvas;\n","import React, { useState, useEffect } from 'react';\nimport Jimp from 'jimp/es';\nimport PropTypes from 'prop-types';\nimport { useDropzone } from 'react-dropzone';\nimport { Container, Box, Snackbar, Typography } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport Canvas from './Canvas';\n\n// TODO: return Jimp Image\n// TODO: Only accept image types\n\n// Let's the user select an image file\n// When a valid image is selected, calls the \"onload\" callback with a JimpImage object.\nfunction ImageUpload(props) {\n  const { onload, imageData } = props;\n\n  const [error, setError] = useState(undefined);\n  const { acceptedFiles, fileRejections, getRootProps, getInputProps } = useDropzone({\n    accept: 'image/*',\n    maxFiles: 1\n  });\n\n  useEffect(() => {\n    const readFile = file => {\n      const reader = new FileReader();\n\n      reader.onabort = () => setError('file reading was aborted');\n      reader.onerror = () => setError('file reading has failed');\n      reader.onload = () => {\n        Jimp.read(reader.result)\n          .then(img => {\n            setError(undefined);\n            onload({ jimpImage: img, filename: file.name });\n          })\n          .catch(err => {\n            setError(err.message);\n          });\n      };\n      reader.readAsArrayBuffer(file);\n    };\n    if (acceptedFiles !== undefined && acceptedFiles.length === 1) {\n      readFile(acceptedFiles[0]);\n    }\n  }, [acceptedFiles]);\n\n  useEffect(() => {\n    if (fileRejections !== undefined && fileRejections.length > 0) {\n      const rejectedFile = fileRejections[0];\n      const errorMessages = rejectedFile.errors.map(e => e.message).reduce((a, e) => `${a},${e}`);\n      setError(`Cannot load ${rejectedFile.file.path}: ${errorMessages}`);\n    }\n  }, [fileRejections]);\n\n  return (\n    <Container>\n      <Box border={0} m={1} boxShadow={2} borderRadius=\"borderRadius\" borderColor=\"textSecondary\">\n        <div {...getRootProps({ className: 'dropzone' })}>\n          <input {...getInputProps()} />\n          <Canvas width={320} height={200} imageData={imageData} />\n          <Typography color=\"textSecondary\" gutterBottom>\n            Drop image here, or click to browse\n          </Typography>\n        </div>\n      </Box>\n      <Snackbar open={error} autoHideDuration={6000} onClose={() => setError(undefined)}>\n        <Alert severity=\"error\">{error}</Alert>\n      </Snackbar>\n    </Container>\n  );\n}\n\nImageUpload.propTypes = {\n  // callback when image is loaded successfully\n  onload: PropTypes.func.isRequired,\n  imageData: PropTypes.shape()\n};\n\nImageUpload.defaultProps = {\n  imageData: undefined\n};\nexport default ImageUpload;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Radio, RadioGroup, FormControlLabel, FormControl, FormLabel, Tooltip } from '@material-ui/core';\n\nfunction ProfileSelection(props) {\n  const { label, value, items, onChange, tooltip } = props;\n\n  return (\n    <Tooltip title={tooltip}>\n      <FormControl component=\"fieldset\">\n        <FormLabel component=\"legend\">{label}</FormLabel>\n        <RadioGroup\n          row\n          aria-label={label}\n          name={`select${label}`}\n          value={value}\n          onChange={event => onChange(event.target.value)}\n        >\n          {items.map(i => (\n            <FormControlLabel value={i} control={<Radio />} label={i} />\n          ))}\n        </RadioGroup>\n      </FormControl>\n    </Tooltip>\n  );\n}\n\nProfileSelection.propTypes = {\n  label: PropTypes.string,\n  value: PropTypes.string.isRequired,\n  items: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n  onChange: PropTypes.func.isRequired,\n  tooltip: PropTypes.string.isRequired\n};\n\nProfileSelection.defaultProps = {\n  label: 'Choose'\n};\n\nexport default ProfileSelection;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Checkbox, FormControlLabel, Tooltip } from '@material-ui/core';\n\nfunction MyCheckbox(props) {\n  const { name, label, value, onChange, tooltip } = props;\n\n  return (\n    <Tooltip title={tooltip} arrow>\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={value}\n            onChange={() => {\n              onChange(!value);\n            }}\n            name={`${name}Checkbox`}\n          />\n        }\n        label={label}\n      />\n    </Tooltip>\n  );\n}\n\nMyCheckbox.propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.bool.isRequired,\n  onChange: PropTypes.func.isRequired,\n  tooltip: PropTypes.string.isRequired\n};\n\nexport default MyCheckbox;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Grid, Slider, Tooltip, FormLabel } from '@material-ui/core';\n\nfunction MySlider(props) {\n  const { label, value, min, max, step, onChange, tooltip, icon, disabled } = props;\n\n  return (\n    <>\n      <FormLabel component=\"legend\">{label}</FormLabel>\n      <Tooltip title={tooltip} arrow>\n        <Grid container>\n          <Grid item>{icon} &nbsp;</Grid>\n          <Grid item xs>\n            <Slider\n              min={min}\n              max={max}\n              step={step}\n              value={value}\n              onChange={(event, newValue) => onChange(newValue)}\n              valueLabelDisplay=\"auto\"\n              disabled={disabled}\n            />\n          </Grid>\n        </Grid>\n      </Tooltip>\n    </>\n  );\n}\n\nMySlider.propTypes = {\n  icon: PropTypes.node.isRequired,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.bool.isRequired,\n  min: PropTypes.number,\n  max: PropTypes.number.isRequired,\n  step: PropTypes.number,\n  onChange: PropTypes.func.isRequired,\n  tooltip: PropTypes.string.isRequired,\n  disabled: PropTypes.bool\n};\n\nMySlider.defaultProps = {\n  min: 0,\n  step: 1,\n  disabled: false\n};\n\nexport default MySlider;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Container, Tooltip } from '@material-ui/core';\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\n\nfunction ResetButton(props) {\n  const { onClick, disabled } = props;\n\n  return (\n    <Container align=\"left\">\n      <Tooltip title=\"Reset controls below to their default settings\" arrow>\n        <Button size=\"small\" disabled={disabled} startIcon={<AutorenewIcon />} onClick={onClick}>\n          defaults\n        </Button>\n      </Tooltip>\n    </Container>\n  );\n}\n\nResetButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  disabled: PropTypes.bool\n};\n\nResetButton.defaultProps = {\n  disabled: false\n};\n\nexport default ResetButton;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Jimp from 'jimp';\nimport { Button, Container } from '@material-ui/core';\nimport Brightness5OutlinedIcon from '@material-ui/icons/Brightness5Outlined';\nimport Brightness6OutlinedIcon from '@material-ui/icons/Brightness6Outlined';\nimport BrokenImageOutlinedIcon from '@material-ui/icons/BrokenImageOutlined';\nimport BlurOnOutlinedIcon from '@material-ui/icons/BlurOnOutlined';\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\nimport { getImageDataFromJimpImage, cropJimpImage, abbreviateFilename } from './Utilities';\nimport ImageUpload from './ImageUpload';\nimport ProfileSelection from './ProfileSelection';\nimport MyCheckbox from './MyCheckbox';\nimport MySlider from './MySlider';\nimport ResetButton from './ResetButton';\n\nfunction ImagePreProcessor(props) {\n  const { onChanged } = props;\n\n  // defaults\n\n  const normalizeDefault = true;\n  const greyscaleDefault = false;\n  const mirrorHorDefault = false;\n  const mirrorVerDefault = false;\n  const invertDefault = false;\n  const brightnessDefault = 0;\n  const contrastDefault = 0;\n  const blurDefault = 0;\n  const thresholdDefault = 0;\n\n  // the originally uploaded image\n  const [sourceImage, setSourceImage] = useState(undefined);\n\n  // the source image after cropping\n  const [croppedImage, setCroppedImage] = useState(undefined);\n\n  // the final processed image\n  const [image, setImage] = useState(undefined);\n\n  // the image data to show on the canvas\n  const [imageData, setImageData] = useState(undefined);\n\n  const [filename, setFilename] = useState('input');\n  const [scale, setScale] = useState('fill');\n  const [normalize, setNormalize] = useState(normalizeDefault);\n  const [greyscale, setGreyscale] = useState(greyscaleDefault);\n  const [mirrorHor, setMirrorHor] = useState(mirrorHorDefault);\n  const [mirrorVer, setMirrorVer] = useState(mirrorVerDefault);\n  const [invert, setInvert] = useState(invertDefault);\n  const [brightness, setBrightness] = useState(brightnessDefault);\n  const [contrast, setContrast] = useState(contrastDefault);\n  const [blur, setBlur] = useState(blurDefault);\n  const [threshold, setThreshold] = useState(thresholdDefault);\n\n  function reset() {\n    setNormalize(normalizeDefault);\n    setGreyscale(greyscaleDefault);\n    setMirrorHor(mirrorHorDefault);\n    setMirrorVer(mirrorVerDefault);\n    setInvert(invertDefault);\n    setBrightness(brightnessDefault);\n    setContrast(contrastDefault);\n    setBlur(blurDefault);\n    setThreshold(thresholdDefault);\n  }\n\n  function onUploaded(newUploadedImage) {\n    setSourceImage(newUploadedImage.jimpImage);\n    setFilename(newUploadedImage.filename);\n  }\n\n  // if the processed image has changed, notify owner\n  useEffect(() => {\n    if (image !== undefined) {\n      onChanged({ jimpImage: image, filename });\n      setImageData(getImageDataFromJimpImage(image));\n    }\n  }, [image, onChanged, filename]);\n\n  // if the source image has changed, apply cropping\n  useEffect(() => {\n    if (sourceImage === undefined) {\n      return;\n    }\n\n    const newImage = sourceImage.clone();\n    if (scale === 'fill') {\n      newImage.cover(320, 200, Jimp.RESIZE_HERMITE);\n    } else if (scale === 'fit') {\n      newImage.contain(320, 200, Jimp.RESIZE_HERMITE);\n    } else {\n      cropJimpImage(newImage);\n    }\n    setCroppedImage(newImage);\n  }, [sourceImage, scale]);\n\n  // if the cropped image or any of the controls change, update the image\n  useEffect(() => {\n    if (croppedImage === undefined) {\n      return;\n    }\n    const newImage = croppedImage.clone();\n\n    if (greyscale) {\n      newImage.greyscale();\n    }\n    if (normalize) {\n      newImage.normalize();\n    }\n\n    newImage.brightness(brightness);\n    newImage.contrast(contrast);\n\n    if (blur > 0) {\n      newImage.blur(blur);\n    }\n\n    newImage.mirror(mirrorHor, mirrorVer);\n\n    if (invert) {\n      newImage.invert();\n    }\n\n    if (threshold > 0) {\n      newImage.threshold({ max: threshold, autoGreyscale: false });\n    }\n\n    setImage(newImage);\n  }, [croppedImage, normalize, brightness, contrast, greyscale, blur, mirrorHor, mirrorVer, invert, threshold]);\n\n  const defaultsSet =\n    normalize === normalizeDefault &&\n    greyscale === greyscaleDefault &&\n    mirrorHor === mirrorHorDefault &&\n    mirrorVer === mirrorVerDefault &&\n    invert === invertDefault &&\n    contrast === contrastDefault &&\n    brightness === brightnessDefault &&\n    blur === blurDefault &&\n    threshold === thresholdDefault;\n\n  return (\n    <>\n      <h4>{abbreviateFilename(filename, 30)}</h4>\n      <Container>\n        <ImageUpload imageData={imageData} onload={onUploaded} />\n      </Container>\n      <Container align=\"left\">\n        <ProfileSelection\n          label=\"cropping\"\n          items={['crop', 'fill', 'fit']}\n          value={scale}\n          onChange={value => {\n            setScale(value);\n          }}\n          tooltip=\"Type of cropping to apply to source image\"\n        />\n      </Container>\n\n      <ResetButton onClick={reset} disabled={defaultsSet}/>\n\n      <Container align=\"left\">\n        <MyCheckbox\n          name=\"normalize\"\n          label=\"normalize\"\n          value={normalize}\n          onChange={v => setNormalize(v)}\n          tooltip=\"Stretch color intensities to their full range\"\n        />\n        <MyCheckbox\n          name=\"greyscale\"\n          label=\"greyscale\"\n          value={greyscale}\n          onChange={v => setGreyscale(v)}\n          tooltip=\"Convert to black and white\"\n        />\n        <MyCheckbox name=\"invert\" label=\"invert\" value={invert} onChange={v => setInvert(v)} tooltip=\"Invert colors\" />\n        <MyCheckbox\n          name=\"mirrorHor\"\n          label=\"flip horizontal\"\n          value={mirrorHor}\n          onChange={v => setMirrorHor(v)}\n          tooltip=\"Mirror image horizontally\"\n        />\n        <MyCheckbox\n          name=\"mirrorVer\"\n          label=\"flip vertical\"\n          value={mirrorVer}\n          onChange={v => setMirrorVer(v)}\n          tooltip=\"Mirror image vertically\"\n        />\n        <MySlider\n          label=\"brightness\"\n          value={brightness}\n          min={-1.0}\n          max={1.0}\n          step={0.05}\n          onChange={v => setBrightness(v)}\n          tooltip=\"Adjust image brightness\"\n          icon={<Brightness5OutlinedIcon />}\n        />\n        <MySlider\n          label=\"contrast\"\n          value={contrast}\n          min={-1.0}\n          max={1.0}\n          step={0.05}\n          onChange={v => setContrast(v)}\n          tooltip=\"Adjust image contrast\"\n          icon={<Brightness6OutlinedIcon />}\n        />\n        <MySlider\n          label=\"blur\"\n          value={blur}\n          max={10}\n          onChange={v => setBlur(v)}\n          tooltip=\"Blur image by this many pixels\"\n          icon={<BlurOnOutlinedIcon />}\n        />\n        <MySlider\n          label=\"threshold\"\n          value={threshold}\n          max={255}\n          onChange={v => setThreshold(v)}\n          tooltip=\"Convert to black and white and remove pixels below this intensity threshold. (0 = off)\"\n          icon={<BrokenImageOutlinedIcon />}\n        />\n      </Container>\n    </>\n  );\n}\n\nImagePreProcessor.propTypes = {\n  onChanged: PropTypes.func.isRequired\n};\n\nexport default ImagePreProcessor;\n","import React, { useEffect, useState } from 'react';\nimport { ColorSpaces, Quantizer, Converter, GraphicModes, Palettes } from 'retropixels-core';\nimport PropTypes from 'prop-types';\nimport OrderedDither from 'retropixels-core/target/conversion/OrderedDither';\nimport { getImageDataFromPixelImage } from './Utilities';\nimport Canvas from './Canvas';\n\nfunction TargetImage(props) {\n  const graphicMode = GraphicModes.all.bitmap;\n\n  const { jimpImage, onChanged, hires, nomaps, colorspaceId, paletteId, ditherId, ditherRadius } = props;\n\n  const defaultQuantizer = new Quantizer(Palettes.all[paletteId], ColorSpaces.all[colorspaceId]);\n  const defaultConverter = new Converter(defaultQuantizer);\n  const defaultDitherer = new OrderedDither(OrderedDither.presets[ditherId], ditherRadius);\n\n  const [pixelImage, setPixelImage] = useState(undefined);\n  const [imageData, setImageData] = useState(undefined);\n\n  const [quantizer, setQuantizer] = useState(defaultQuantizer);\n  const [converter, setConverter] = useState(defaultConverter);\n  const [ditherer, setDitherer] = useState(defaultDitherer);\n\n  useEffect(() => {\n    setQuantizer(new Quantizer(Palettes.all[paletteId], ColorSpaces.all[colorspaceId]));\n  }, [colorspaceId, paletteId]);\n\n  useEffect(() => {\n    setConverter(new Converter(quantizer));\n  }, [quantizer]);\n\n  useEffect(() => {\n    setDitherer(new OrderedDither(OrderedDither.presets[ditherId], ditherRadius));\n  }, [ditherId, ditherRadius]);\n\n  useEffect(() => {\n    if (jimpImage !== undefined) {\n      const newPixelImage = graphicMode({ hires, nomaps });\n      const resizedImage = jimpImage.clone();\n      resizedImage.resize(newPixelImage.mode.width, newPixelImage.mode.height);\n      if (ditherId !== 'none') {\n        ditherer.dither(resizedImage.bitmap);\n      }\n      // TODO: this is a workaround for a bug in dithering\n      // that clears the alpha channel\n      resizedImage.opaque();\n\n      converter.convert(resizedImage.bitmap, newPixelImage);\n      setPixelImage(newPixelImage);\n    }\n  }, [jimpImage, converter, ditherer, hires, nomaps, graphicMode]);\n\n  useEffect(() => {\n    setImageData(getImageDataFromPixelImage(pixelImage));\n    onChanged(pixelImage);\n  }, [pixelImage, onChanged]);\n\n  return (\n    <>\n      <Canvas width={320} height={200} imageData={imageData} />\n    </>\n  );\n}\n\nTargetImage.propTypes = {\n  jimpImage: PropTypes.shape(),\n  onChanged: PropTypes.func,\n  hires: PropTypes.bool,\n  nomaps: PropTypes.bool,\n  colorspaceId: PropTypes.string,\n  paletteId: PropTypes.string,\n  ditherId: PropTypes.string,\n  ditherRadius: PropTypes.number\n};\n\nTargetImage.defaultProps = {\n  jimpImage: undefined,\n  onChanged: () => {},\n  hires: false,\n  nomaps: false,\n  colorspaceId: 'xyz',\n  paletteId: 'colodore',\n  ditherId: 'bayer4x4',\n  ditherRadius: 32\n};\n\nexport default TargetImage;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Container, Tooltip } from '@material-ui/core';\nimport BlurLinearIcon from '@material-ui/icons/BlurLinear';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport { C64Writer } from 'retropixels-core';\nimport { saveAs } from 'file-saver';\nimport { parseFilename } from './Utilities';\nimport ProfileSelection from './ProfileSelection';\nimport TargetImage from './TargetImage';\nimport MyCheckbox from './MyCheckbox';\nimport MySlider from './MySlider';\nimport ResetButton from './ResetButton';\n\n// wraps the Targetimage with controls for the various properties\nfunction Retropixels(props) {\n  const ditherOptions = ['none', 'bayer2x2', 'bayer4x4', 'bayer8x8'];\n  const colorspaceOptions = ['rgb', 'yuv', 'xyz', 'rainbow'];\n  const paletteOptions = ['colodore', 'pepto', 'deekay'];\n\n  // defaults\n\n  const ditherDefault = 'bayer4x4';\n  const paletteDefault = 'colodore';\n  const colorspaceDefault = 'xyz';\n  const hiresDefault = false;\n  const nomapsDefault = false;\n  const ditherRadiusDefault = 32;\n\n  const { jimpImage, filename } = props;\n\n  const [pixelImage, setPixelImage] = useState(undefined);\n  const [colorspace, setColorSpace] = useState(colorspaceDefault);\n  const [palette, setPalette] = useState(paletteDefault);\n  const [hires, setHires] = useState(hiresDefault);\n  const [nomaps, setNomaps] = useState(nomapsDefault);\n  const [dither, setDither] = useState(ditherDefault);\n  const [ditherRadius, setDitherRadius] = useState(ditherRadiusDefault);\n\n  let targetFilename = 'output';\n  if (pixelImage !== undefined) {\n    const extension = pixelImage.mode.pixelWidth === 1 ? '.art' : '.kla';\n    const parsedFilename = parseFilename(filename);\n    targetFilename = `${parsedFilename.basename.substring(0, 30)}${extension}`;\n  }\n\n  function onNewPixelImage(newPixelImage) {\n    setPixelImage(newPixelImage);\n  }\n\n  function reset() {\n    setColorSpace(colorspaceDefault);\n    setPalette(paletteDefault);\n    setHires(hiresDefault);\n    setNomaps(nomapsDefault);\n    setDither(ditherDefault);\n    setDitherRadius(ditherRadiusDefault);\n  }\n\n  function saveOutput() {\n    const binary = C64Writer.toBinary(pixelImage);\n    const buffer = C64Writer.toBuffer(binary);\n    const blob = new Blob([buffer], { type: 'application/octet-stream' });\n    saveAs(blob, targetFilename);\n  }\n\n  // function savePNG() {\n  //   JimpPreprocessor.toJimpImage(pixelImage, Palettes.all[palette]).then(outputJimpImage => {\n  //     outputJimpImage.image\n  //       .getBufferAsync(Jimp.MIME_PNG)\n  //       .then(buffer => {\n  //         const blob = new Blob([buffer], { type: 'application/octet-stream' });\n  //         saveAs(blob, 'test.png');\n  //       })\n  //       .catch(error => alert(error));\n  //   });\n  // }\n\n  let outputFormat = 'output';\n  if (pixelImage !== undefined) {\n    outputFormat = pixelImage.mode.pixelWidth === 1 ? 'art studio file' : 'koala painter file';\n  }\n\n  const defaultsSet =\n    colorspace === colorspaceDefault &&\n    palette === paletteDefault &&\n    hires === hiresDefault &&\n    nomaps === nomapsDefault &&\n    dither === ditherDefault &&\n    ditherRadius === ditherRadiusDefault;\n\n  return (\n    <>\n      <h4>{outputFormat}</h4>\n      <Container>\n        <TargetImage\n          jimpImage={jimpImage}\n          onChanged={onNewPixelImage}\n          hires={hires}\n          nomaps={nomaps}\n          colorspaceId={colorspace}\n          paletteId={palette}\n          ditherId={dither}\n          ditherRadius={ditherRadius}\n        />\n      </Container>\n      <Container>\n        <Tooltip title={`Download the image as ${outputFormat}`} arrow>\n          <Button\n            variant=\"contained\"\n            disabled={pixelImage === undefined}\n            color=\"primary\"\n            startIcon={<CloudDownloadIcon />}\n            onClick={() => saveOutput()}\n          >\n            Download\n          </Button>\n        </Tooltip>\n      </Container>\n      <ResetButton onClick={reset} disabled={defaultsSet} />\n      <Container align=\"left\">\n        <MyCheckbox\n          name=\"hires\"\n          label=\"hires\"\n          value={hires}\n          onChange={v => setHires(v)}\n          tooltip=\"Use high resolution mode instead of multi color\"\n        />\n        <MyCheckbox\n          name=\"nomaps\"\n          label=\"single color layers\"\n          value={nomaps}\n          onChange={v => setNomaps(v)}\n          tooltip=\"Restrict each attribute layer to a single color\"\n        />\n      </Container>\n      <Container align=\"left\">\n        <ProfileSelection\n          label=\"colorspace\"\n          value={colorspace}\n          items={colorspaceOptions}\n          onChange={value => setColorSpace(value)}\n          tooltip=\"Convert colors to this color space before quantizing\"\n        />\n        <ProfileSelection\n          label=\"palette\"\n          value={palette}\n          items={paletteOptions}\n          onChange={value => setPalette(value)}\n          tooltip=\"Use this palette for quantizing\"\n        />\n        <ProfileSelection\n          label=\"dithering\"\n          value={dither}\n          items={ditherOptions}\n          onChange={value => setDither(value)}\n          tooltip=\"Type of dithering to apply\"\n        />\n        <MySlider\n          label=\"dithering strength\"\n          value={ditherRadius}\n          max={64}\n          onChange={v => setDitherRadius(v)}\n          tooltip=\"Strength of dithering\"\n          icon={<BlurLinearIcon />}\n          disabled={dither === 'none'}\n        />\n      </Container>\n    </>\n  );\n}\n\nRetropixels.propTypes = {\n  jimpImage: PropTypes.shape(),\n  filename: PropTypes.string\n};\n\nRetropixels.defaultProps = {\n  jimpImage: undefined,\n  filename: 'output'\n};\n\nexport default Retropixels;\n","export default __webpack_public_path__ + \"static/media/logo.42e2fcaf.svg\";","export default {buildnr: '2021-05-29.104f741', url: 'https://github.com/micheldebree/retropixels/commit/104f741bf8a006fc9650a0d8287ac81e4be06016'}\n","import React, { useState } from 'react';\nimport { Grid, AppBar, Toolbar, Typography, Button, Link, Container } from '@material-ui/core';\nimport './App.css';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ImagePreProcessor from './ImagePreProcessor';\nimport Retropixels from './Retropixels';\nimport Logo from './logo.svg';\nimport AppVersion from './version';\n\n// https://github.com/harishmahamure/photoCompress\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    flexGrow: 1\n  }\n}));\n\nfunction App() {\n  const [sourceImage, setSourceImage] = useState(undefined);\n  const [filename, setFilename] = useState(undefined);\n\n  const classes = useStyles();\n\n  function onSourceImageChanged(newSourceImage) {\n    setSourceImage(newSourceImage.jimpImage);\n    setFilename(newSourceImage.filename);\n  }\n  return (\n    <div className=\"App\">\n      <body className=\"App-body\">\n        <div className={classes.root}>\n          <AppBar position=\"static\">\n            <Toolbar variant=\"dense\">\n              <img src={Logo} alt=\"Logo\" className=\"logo\" />\n              <Typography variant=\"h6\" className={classes.title} align=\"left\">\n                Retropixels\n              </Typography>\n              <Link href={AppVersion.url} color=\"inherit\" variant=\"body2\">\n                v{AppVersion.buildnr}\n              </Link>\n              <Button color=\"inherit\" href=\"https://github.com/micheldebree/retropixels\">\n                <GitHubIcon />\n              </Button>\n            </Toolbar>\n          </AppBar>\n        </div>\n        <Container align=\"left\">\n          <Typography variant=\"overline\">\n            Convert images to <Link href=\"https://en.wikipedia.org/wiki/Commodore_64\">Commodore 64</Link> format\n          </Typography>\n        </Container>\n        <Grid container spacing={3}>\n          <Grid item xs>\n            <ImagePreProcessor onChanged={onSourceImageChanged} />\n          </Grid>\n          <Grid item xs>\n            <Retropixels jimpImage={sourceImage} filename={filename} />\n          </Grid>\n        </Grid>\n      </body>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}